@model WebApplication1.ViewModels.AllDetailsViewModel
@using System.Linq; 
@{
    ViewData["Title"] = "Comprehensive Data Details";
    Layout = "~/Views/Shared/_Layout.cshtml"; // تأكد من استخدام الـ Layout الرئيسي
}

<h2 class="mb-4"><i class="fas fa-database me-2"></i>@ViewData["Title"]</h2>

<div class="card shadow-sm">
    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs" id="detailsTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="controllers-tab" data-bs-toggle="tab" data-bs-target="#controllers" type="button" role="tab" aria-controls="controllers" aria-selected="true">
                    <i class="fas fa-users me-1"></i> Controllers
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="employees-tab" data-bs-toggle="tab" data-bs-target="#employees" type="button" role="tab" aria-controls="employees" aria-selected="false">
                    <i class="fas fa-user-tie me-1"></i> AIS / CNS / AFTN / Ops Staff
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="licenses-tab" data-bs-toggle="tab" data-bs-target="#licenses" type="button" role="tab" aria-controls="licenses" aria-selected="false">
                    <i class="fas fa-id-card me-1"></i> Licenses
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="certificates-tab" data-bs-toggle="tab" data-bs-target="#certificates" type="button" role="tab" aria-controls="certificates" aria-selected="false">
                    <i class="fas fa-certificate me-1"></i> Certificates
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="observations-tab" data-bs-toggle="tab" data-bs-target="#observations" type="button" role="tab" aria-controls="observations" aria-selected="false">
                    <i class="fas fa-plane-departure me-1"></i> Observations
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="projects-tab" data-bs-toggle="tab" data-bs-target="#projects" type="button" role="tab" aria-controls="projects" aria-selected="false">
                    <i class="fas fa-diagram-project me-1"></i> Courses
                </button>
            </li>
        </ul>
    </div>
    <div class="card-body">
        <div class="tab-content" id="detailsTabsContent">
            <!-- Controllers Tab -->
            <div class="tab-pane fade show active" id="controllers" role="tabpanel" aria-labelledby="controllers-tab">
                <h4>Controllers List</h4>
                @if (Model.AllControllers != null && Model.AllControllers.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered" id="controllersTable">
                            <thead>
                                <tr>
                                    <th>Full Name</th>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Job Title</th>
                                    <th>Department</th>
                                    <th>Status</th>
                                    <!-- أضف المزيد من الأعمدة حسب الحاجة -->
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.AllControllers)
                                {
                                    <tr>
                                        <td>@item.FullName</td>
                                        <td>@item.Username</td>
                                        <td>@item.Email</td>
                                        <td>@item.PhoneNumber</td>
                                        <td>@item.JobTitle</td>
                                        <td>@item.CurrentDepartment</td>
                                        <td>@item.EmploymentStatus</td>
                                        <!-- أضف المزيد من البيانات -->
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-info">No controllers data available.</div>
                }
            </div>

            <!-- Employees Tab -->
            <div class="tab-pane fade" id="employees" role="tabpanel" aria-labelledby="employees-tab">
                <h4>AIS / CNS / AFTN / Ops Staff - List</h4>
                @if (Model.AllEmployees != null && Model.AllEmployees.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered" id="employeesTable">
                            <thead>
                                <tr>
                                    <th>Full Name</th>
                                    <th>Username</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Job Title</th>
                                    <th>Department</th>
                                    <th>Status</th>
                                    <th>Gender</th>
                                    <!-- أضف المزيد من الأعمدة حسب الحاجة -->
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.AllEmployees)
                                {
                                    <tr>
                                        <td>@item.FullName</td>
                                        <td>@item.Username</td>
                                        <td>@item.Email</td>
                                        <td>@item.PhoneNumber</td>
                                        <td>@item.JobTitle</td>
                                        <td>@item.Department</td>
                                        <td>@(item.IsActive ? "Active" : "Inactive")</td>
                                        <td>@item.Gender</td>
                                        <!-- أضف المزيد من البيانات -->
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-info">No AIS / CNS / AFTN / Ops Staff data available.</div>
                }
            </div>

            <!-- Licenses Tab -->
            <div class="tab-pane fade" id="licenses" role="tabpanel" aria-labelledby="licenses-tab">
                <h4>Licenses List</h4>
                @if (Model.AllLicenses != null && Model.AllLicenses.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered" id="licensesTable">
                            <thead>
                                <tr>
                                    <th>Person Name</th>
                                    <th>Type</th>
                                    <th>Issue Date</th>
                                    <th>Expiry Date</th>
                                    <th>License Number</th>
                                    <!-- أضف المزيد من الأعمدة -->
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.AllLicenses)
                                {
                                    <tr>
                                        <td>@(item.ControllerName ?? item.EmployeeName)</td>
                                        <td>@item.LicenseType</td>
                                        <td>@(item.IssueDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@(item.ExpiryDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@item.licensenumber</td>
                                        <!-- أضف المزيد من البيانات -->
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-info">No licenses data available.</div>
                }
            </div>

            <!-- Certificates Tab -->
            <div class="tab-pane fade" id="certificates" role="tabpanel" aria-labelledby="certificates-tab">
                <h4>Certificates List</h4>
                @if (Model.AllCertificates != null && Model.AllCertificates.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered" id="certificatesTable">
                            <thead>
                                <tr>
                                    <th>Person Name</th>
                                    <th>Type</th>
                                    <th>Title</th>
                                    <th>Issue Date</th>
                                    <th>Expiry Date</th>
                                    <th>Status</th>
                                    <!-- أضف المزيد من الأعمدة -->
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.AllCertificates)
                                {
                                    <tr>
                                        <td>@(item.ControllerName ?? item.EmployeeName)</td>
                                        <td>@item.TypeName</td>
                                        <td>@item.Title</td>
                                        <td>@(item.IssueDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@(item.ExpiryDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@item.Status</td>
                                        <!-- أضف المزيد من البيانات -->
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-info">No certificates data available.</div>
                }
            </div>

            <!-- Observations Tab -->
            <div class="tab-pane fade" id="observations" role="tabpanel" aria-labelledby="observations-tab">
                <h4>Observations List</h4>
                @if (Model.AllObservations != null && Model.AllObservations.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered" id="observationsTable">
                            <thead>
                                <tr>
                                    <th>Person Name</th>
                                    <th>Observation No.</th>
                                    <th>Flight No.</th>
                                    <th>Country</th>
                                    <th>Depart Date</th>
                                    <th>Return Date</th>
                                    <th>Notes</th>
                                    <!-- أضف المزيد من الأعمدة -->
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.AllObservations)
                                {
                                    <tr>
                                        <td>@(item.ControllerName ?? item.EmployeeName)</td> 
                                        <td>@item.ObservationNo</td>
                                        <td>@item.FlightNo</td>
                                        <td>@item.TravelCountry</td>
                                        <td>@(item.DepartDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@(item.ReturnDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@item.Notes</td>
                                        <!-- أضف المزيد من البيانات -->
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-info">No observations data available.</div>
                }
            </div>

            <!-- Projects Tab -->
            <div class="tab-pane fade" id="projects" role="tabpanel" aria-labelledby="projects-tab">
                <h4>Courses List</h4>
                @if (Model.AllProjects != null && Model.AllProjects.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered" id="projectsTable">
                            <thead>
                                <tr>
                                    <th>Courses Name</th>
                                    <th>Status</th>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Location</th>
                                    <th>Description</th>
                                    <!-- أضف المزيد من الأعمدة -->
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.AllProjects)
                                {
                                    <tr>
                                        <td>@item.ProjectName</td>
                                        <td>@item.Status</td>
                                        <td>@(item.StartDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@(item.EndDate?.ToString("yyyy-MM-dd") ?? "-")</td>
                                        <td>@item.Location</td>
                                        <td>@item.Description</td>
                                        <!-- أضف المزيد من البيانات -->
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-info">No Courses data available.</div>
                }
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap5.min.js"></script>
    <link href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap5.min.css" rel="stylesheet" />

    <script>
        $(document ).ready(function () {
            // Initialize DataTables for each table
            $('#controllersTable').DataTable();
            $('#employeesTable').DataTable();
            $('#licensesTable').DataTable();
            $('#certificatesTable').DataTable();
            $('#observationsTable').DataTable();
            $('#projectsTable').DataTable();
        });
    </script>
}
